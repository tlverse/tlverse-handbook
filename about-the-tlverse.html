<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 About the tlverse | Targeted Learning in R</title>
<meta name="author" content="Mark van der Laan, Jeremy Coyle, Nima Hejazi, Ivana Malenica, Rachael Phillips, Alan Hubbard">
<meta name="description" content="Updated: 2022-06-27  3.1 What is the tlverse? The tlverse is a new framework for doing Targeted Learning in R, inspired by the tidyverse ecosystem of R packages. By analogy to the tidyverse: The...">
<meta name="generator" content="bookdown 0.26.3 with bs4_book()">
<meta property="og:title" content="Chapter 3 About the tlverse | Targeted Learning in R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://tlverse.org/tlverse-handbook/about-the-tlverse.html">
<meta property="og:description" content="Updated: 2022-06-27  3.1 What is the tlverse? The tlverse is a new framework for doing Targeted Learning in R, inspired by the tidyverse ecosystem of R packages. By analogy to the tidyverse: The...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 About the tlverse | Targeted Learning in R">
<meta name="twitter:site" content="@tlverse">
<meta name="twitter:description" content="Updated: 2022-06-27  3.1 What is the tlverse? The tlverse is a new framework for doing Targeted Learning in R, inspired by the tidyverse ecosystem of R packages. By analogy to the tidyverse: The...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body>
<span class="math inline">
  \(\DeclareMathOperator{\expit}{expit}\)
  \(\DeclareMathOperator{\logit}{logit}\)
  \(\DeclareMathOperator*{\argmin}{\arg\!\min}\)
  \(\newcommand{\indep}{\perp\!\!\!\perp}\)
  \(\newcommand{\coloneqq}{\mathrel{=}}\)
  \(\newcommand{\R}{\mathbb{R}}\)
  \(\newcommand{\E}{\mathbb{E}}\)
  \(\newcommand{\M}{\mathcal{M}}\)
  \(\renewcommand{\P}{\mathbb{P}}\)
  \(\newcommand{\I}{\mathbb{I}}\)
  \(\newcommand{\1}{\mathbbm{1}}\)
  </span>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="css/style.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Causal Data Science with the tlverse Software Ecosystem">Targeted Learning in R</a>:
        <small class="text-muted">Causal Data Science with the tlverse Software Ecosystem</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Preliminaries</li>
<li><a class="active" href="about-the-tlverse.html"><span class="header-section-number">3</span> About the tlverse</a></li>
<li><a class="" href="software-setup.html"><span class="header-section-number">4</span> Software setup</a></li>
<li><a class="" href="example-datasets.html"><span class="header-section-number">5</span> Example Datasets</a></li>
<li class="book-part">Foundations</li>
<li><a class="" href="roadmap.html"><span class="header-section-number">6</span> Roadmap for Learning from Data</a></li>
<li><a class="" href="origami.html"><span class="header-section-number">7</span> Cross-validation</a></li>
<li><a class="" href="sl3.html"><span class="header-section-number">8</span> Super Learning</a></li>
<li><a class="" href="tmle3.html"><span class="header-section-number">9</span> The TMLE Framework</a></li>
<li class="book-part">Advanced TMLE</li>
<li><a class="" href="dynamic-and-optimal-individualized-treatment-regimes.html"><span class="header-section-number">10</span> Dynamic and Optimal Individualized Treatment Regimes</a></li>
<li><a class="" href="shift.html"><span class="header-section-number">11</span> Stochastic Treatment Regimes</a></li>
<li><a class="" href="causal-mediation-analysis.html"><span class="header-section-number">12</span> Causal Mediation Analysis</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/tlverse/tlverse-handbook">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="about-the-tlverse" class="section level1">
<h1>
<span class="header-section-number">3</span> About the <code>tlverse</code><a class="anchor" aria-label="anchor" href="#about-the-tlverse"><i class="fas fa-link"></i></a>
</h1>
<p>Updated: 2022-06-27</p>
<div id="what-is-the-tlverse" class="section level2">
<h2>
<span class="header-section-number">3.1</span> What is the <code>tlverse</code>?<a class="anchor" aria-label="anchor" href="#what-is-the-tlverse"><i class="fas fa-link"></i></a>
</h2>
<p>The <code>tlverse</code> is a new framework for doing Targeted Learning in <code>R</code>, inspired by
the <a href="https://tidyverse.org"><code>tidyverse</code> ecosystem</a> of <code>R</code> packages.</p>
<p>By analogy to the <a href="https://tidyverse.org/"><code>tidyverse</code></a>:</p>
<blockquote>
<p>The <code>tidyverse</code> is an opinionated collection of <code>R</code> packages designed for data
science. All packages share an underlying design philosophy, grammar, and data
structures.</p>
</blockquote>
<p>So, the <a href="https://tlverse.org"><code>tlverse</code></a> is</p>
<ul>
<li>an opinionated collection of <code>R</code> packages for Targeted Learning</li>
<li>sharing an underlying philosophy, grammar, and set of data structures</li>
</ul>
</div>
<div id="anatomy-of-the-tlverse" class="section level2">
<h2>
<span class="header-section-number">3.2</span> Anatomy of the <code>tlverse</code><a class="anchor" aria-label="anchor" href="#anatomy-of-the-tlverse"><i class="fas fa-link"></i></a>
</h2>
<p>All Targeted Learning methods are targeted maximum likelihood (or minimum
loss-based) estimators (TMLEs). The construction of any Targeted Learning
estimator proceeds through a two-stage process:</p>
<ol style="list-style-type: decimal">
<li>Flexibly learning particular components of the data-generating distribution
through machine learning (e.g., Super Learning), resulting in <em>initial
estimates</em> of nuisance parameters.</li>
<li>Use of a parametric model-based update via maximum likelihood estimation
(i.e., MLE), incorporating the initial estimates produced by the prior step.</li>
</ol>
<p>The packages making up the core components of the <code>tlverse</code> software ecosystem,
<code>sl3</code> and <code>tmle3</code>, address the above two goals, respectively. Together, the very
general functionality exposed by both allows one to build specific TMLEs
tailored exactly to a particular estimation problem.</p>
<p>The software packages that make up the <strong>core</strong> of the <code>tlverse</code> are</p>
<ul>
<li>
<a href="https://github.com/tlverse/sl3"><code>sl3</code></a>: Modern Super Machine Learning
<ul>
<li>
<em>What?</em> A modern object-oriented re-implementation of the Super Learner
algorithm, employing recently developed paradigms in <code>R</code> programming.</li>
<li>
<em>Why?</em> A design that leverages modern ideas for faster computation, is
easily extensible and forward-looking, and forms one of the cornerstones of
the <code>tlverse</code>.</li>
</ul>
</li>
<li>
<a href="https://github.com/tlverse/tmle3"><code>tmle3</code></a>: An Engine for Targeted Learning
<ul>
<li>
<em>What?</em> A generalized framework that simplifies Targeted Learning by
identifying and implementing a series of common statistical estimation
procedures.</li>
<li>
<em>Why?</em> A common interface and engine that accommodates current algorithmic
approaches to Targeted Learning and yet remains a flexible enough engine to
power the implementation of emerging statistical techniques as they are
developed.</li>
</ul>
</li>
</ul>
<p>Beyond these engines that provide the driving force behind the <code>tlverse</code>, there
are a few supporting packages that play important roles in the <strong>background</strong>:</p>
<ul>
<li>
<a href="https://github.com/tlverse/origami"><code>origami</code></a>: A Generalized Framework for
Cross-Validation <span class="citation">(Coyle and Hejazi <a href="references.html#ref-coyle2018origami" role="doc-biblioref">2018</a>)</span>
<ul>
<li>
<em>What?</em> A generalized framework for flexible cross-validation.</li>
<li>
<em>Why?</em> Cross-validation is a key part of ensuring error estimates are honest
and in preventing overfitting. It is an essential part of the both the Super
Learner ensemble modeling algorithm and in the construction of Targeted
Learning estimators.</li>
</ul>
</li>
<li>
<a href="https://github.com/tlverse/delayed"><code>delayed</code></a>: Parallelization Framework for
Dependent Tasks
<ul>
<li>
<em>What?</em> A framework for delayed computations (i.e., futures) based on task
dependencies.</li>
<li>
<em>Why?</em> Efficient allocation of compute resources is essential when deploying
computationally intensive algorithms at large scale.</li>
</ul>
</li>
</ul>
<p>A key principle of the <code>tlverse</code> is extensibility. That is, the software
ecosystem aims to support the development of new Targeted Learning estimators as
they reaching maturity. To achieve this degree of flexibility, we follow the
model of implementing new classes of estimators, for distinct causal inference
problems, in separate packages, all of which use the core machinery provided by
the <code>sl3</code> and <code>tmle3</code> packages There are currently three examples:</p>
<ul>
<li>
<a href="https://github.com/tlverse/tmle3mopttx"><code>tmle3mopttx</code></a>: Optimal Treatments
in the <code>tlverse</code>
<ul>
<li>
<em>What?</em> Learn an optimal rule and estimate the mean outcome under the rule.</li>
<li>
<em>Why?</em> Optimal treatments are a powerful tool in precision healthcare and
other settings where a one-size-fits-all treatment approach is not
appropriate.</li>
</ul>
</li>
<li>
<a href="https://github.com/tlverse/tmle3shift"><code>tmle3shift</code></a>: Stochastic Shift
Interventions in the <code>tlverse</code>
<ul>
<li>
<em>What?</em> Stochastic shift interventions for continuous-valued treatments.</li>
<li>
<em>Why?</em> Not all treatment variables are binary or categorical. Estimating the
total effects of intervening on continuous-valued treatments provides a way
to probe how an effect changes with shifts in the treatment variable.</li>
</ul>
</li>
<li>
<a href="https://github.com/tlverse/tmle3mediate"><code>tmle3mediate</code></a>: Causal Mediation
Analysis in the <code>tlverse</code>
<ul>
<li>
<em>What?</em> Techniques for evaluating the direct and indirect effects of
treatments through mediating variables.</li>
<li>
<em>Why?</em> Evaluating the total effect of a treatment does not provide
information about the pathways through which it may operate. When mediating
variables have been collected, one can instead evaluate direct and indirect
effect parameters that speak to the <em>action mechanism</em> of the treatment.</li>
</ul>
</li>
</ul>
</div>
<div id="primer-on-the-r6-class-system" class="section level2">
<h2>
<span class="header-section-number">3.3</span> Primer on the <code>R6</code> Class System<a class="anchor" aria-label="anchor" href="#primer-on-the-r6-class-system"><i class="fas fa-link"></i></a>
</h2>
<p>The <code>tlverse</code> is designed using basic OOP principles and the <code>R6</code> OOP framework.
While we’ve tried to make it easy to use the <code>tlverse</code> packages without worrying
much about OOP, it is helpful to have some intuition about how the <code>tlverse</code> is
structured. Here, we briefly outline some key concepts from OOP. Readers
familiar with OOP basics are invited to skip this section.</p>
<div id="classes-fields-and-methods" class="section level3">
<h3>
<span class="header-section-number">3.3.1</span> Classes, Fields, and Methods<a class="anchor" aria-label="anchor" href="#classes-fields-and-methods"><i class="fas fa-link"></i></a>
</h3>
<p>The key concept of OOP is that of an object, a collection of data and functions
that corresponds to some conceptual unit. Objects have two main types of
elements:</p>
<ol style="list-style-type: decimal">
<li>
<em>fields</em>, which can be thought of as nouns, are information about an object,
and</li>
<li>
<em>methods</em>, which can be thought of as verbs, are actions an object can
perform.</li>
</ol>
<p>Objects are members of classes, which define what those specific fields and
methods are. Classes can inherit elements from other classes (sometimes called
base classes) – accordingly, classes that are similar, but not exactly the
same, can share some parts of their definitions.</p>
<p>Many different implementations of OOP exist, with variations in how these
concepts are implemented and used. <code>R</code> has several different implementations,
including <code>S3</code>, <code>S4</code>, reference classes, and <code>R6</code>. The <code>tlverse</code> uses the <code>R6</code>
implementation. In <code>R6</code>, methods and fields of a class object are accessed using
the <code>$</code> operator. For a more thorough introduction to <code>R</code>’s various OOP systems,
see <a href="http://adv-r.had.co.nz/OO-essentials.html" class="uri">http://adv-r.had.co.nz/OO-essentials.html</a>, from Hadley Wickham’s <em>Advanced
R</em> <span class="citation">(Wickham <a href="references.html#ref-wickham2014advanced" role="doc-biblioref">2014</a>)</span>.</p>
</div>
<div id="object-oriented-programming-python-and-r" class="section level3 unnumbered">
<h3>Object Oriented Programming: <code>Python</code> and <code>R</code><a class="anchor" aria-label="anchor" href="#object-oriented-programming-python-and-r"><i class="fas fa-link"></i></a>
</h3>
<p>OO concepts (classes with inheritance) were baked into Python from the first
published version (version 0.9 in 1991). In contrast, <code>R</code> gets its OO “approach”
from its predecessor, <code>S</code>, first released in 1976. For the first 15 years, <code>S</code>
had no support for classes, then, suddenly, <code>S</code> got two OO frameworks bolted on
in rapid succession: informal classes with <code>S3</code> in 1991, and formal classes with
<code>S4</code> in 1998. This process continues, with new OO frameworks being periodically
released, to try to improve the lackluster OO support in <code>R</code>, with reference
classes (<code>R5</code>, 2010) and <code>R6</code> (2014). Of these, <code>R6</code> behaves most like Python
classes (and also most like OOP focused languages like C++ and Java), including
having method definitions be part of class definitions, and allowing objects to
be modified by reference.</p>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="intro.html"><span class="header-section-number">1</span> Introduction</a></div>
<div class="next"><a href="software-setup.html"><span class="header-section-number">4</span> Software setup</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#about-the-tlverse"><span class="header-section-number">3</span> About the tlverse</a></li>
<li><a class="nav-link" href="#what-is-the-tlverse"><span class="header-section-number">3.1</span> What is the tlverse?</a></li>
<li><a class="nav-link" href="#anatomy-of-the-tlverse"><span class="header-section-number">3.2</span> Anatomy of the tlverse</a></li>
<li>
<a class="nav-link" href="#primer-on-the-r6-class-system"><span class="header-section-number">3.3</span> Primer on the R6 Class System</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#classes-fields-and-methods"><span class="header-section-number">3.3.1</span> Classes, Fields, and Methods</a></li>
<li><a class="nav-link" href="#object-oriented-programming-python-and-r">Object Oriented Programming: Python and R</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/tlverse/tlverse-handbook/blob/master/02-tlverse.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/tlverse/tlverse-handbook/edit/master/02-tlverse.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Targeted Learning in R</strong>: Causal Data Science with the tlverse Software Ecosystem" was written by Mark van der Laan, Jeremy Coyle, Nima Hejazi, Ivana Malenica, Rachael Phillips, Alan Hubbard. It was last built on June 27, 2022.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
