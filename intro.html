<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 The Roadmap for Targeted Learning | Targeted Learning in R</title>
<meta name="author" content="Mark van der Laan, Jeremy Coyle, Nima Hejazi, Ivana Malenica, Rachael Phillips, Alan Hubbard">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.4.9002/tabs.js"></script><script src="libs/bs3compat-0.2.4.9002/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/vis-4.20.1/vis.css" rel="stylesheet">
<script src="libs/vis-4.20.1/vis.min.js"></script><script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Causal Data Science with the tlverse Software Ecosystem">Targeted Learning in R</a>:
        <small class="text-muted">Causal Data Science with the tlverse Software Ecosystem</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About this book</a></li>
<li><a class="" href="robust.html"><span class="header-section-number">1</span> Robust Statistics and Reproducible Science</a></li>
<li><a class="active" href="intro.html"><span class="header-section-number">2</span> The Roadmap for Targeted Learning</a></li>
<li><a class="" href="tlverse.html"><span class="header-section-number">3</span> Welcome to the tlverse</a></li>
<li><a class="" href="data.html"><span class="header-section-number">4</span> Meet the Data</a></li>
<li><a class="" href="origami.html"><span class="header-section-number">5</span> Cross-validation</a></li>
<li><a class="" href="sl3.html"><span class="header-section-number">6</span> Super (Machine) Learning</a></li>
<li><a class="" href="tmle3.html"><span class="header-section-number">7</span> The TMLE Framework</a></li>
<li><a class="" href="optimal-individualized-treatment-regimes.html"><span class="header-section-number">8</span> Optimal Individualized Treatment Regimes</a></li>
<li><a class="" href="stochastic-treatment-regimes.html"><span class="header-section-number">9</span> Stochastic Treatment Regimes</a></li>
<li><a class="" href="r6.html"><span class="header-section-number">10</span> A Primer on the R6 Class System</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/tlverse/tlverse-handbook">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="intro" class="section level1">
<h1>
<span class="header-section-number">2</span> The Roadmap for Targeted Learning<a class="anchor" aria-label="anchor" href="#intro"><i class="fas fa-link"></i></a>
</h1>
<div id="learning-objectives" class="section level2 unnumbered">
<h2>Learning Objectives<a class="anchor" aria-label="anchor" href="#learning-objectives"><i class="fas fa-link"></i></a>
</h2>
<p>By the end of this chapter you will be able to:</p>
<ol style="list-style-type: decimal">
<li>Translate scientific questions to statistical questions.</li>
<li>Define a statistical model based on the knowledge of the experiment that
generated the data.</li>
<li>Identify a causal parameter as a function of the observed data distribution.</li>
<li>Explain the following causal and statistical assumptions and their
implications: i.i.d., consistency, interference, positivity, SUTVA.</li>
</ol>
</div>
<div id="introduction" class="section level2 unnumbered">
<h2>Introduction<a class="anchor" aria-label="anchor" href="#introduction"><i class="fas fa-link"></i></a>
</h2>
<p>The roadmap of statistical learning is concerned with the translation from
real-world data applications to a mathematical and statistical formulation of
the relevant estimation problem. This involves data as a random variable having
a probability distribution, scientific knowledge represented by a statistical
model, a statistical target parameter representing an answer to the question of
interest, and the notion of an estimator and sampling distribution of the
estimator.</p>
</div>
<div id="roadmap" class="section level2">
<h2>
<span class="header-section-number">2.1</span> The Roadmap<a class="anchor" aria-label="anchor" href="#roadmap"><i class="fas fa-link"></i></a>
</h2>
<p>Following the roadmap is a process of five stages.</p>
<ol style="list-style-type: decimal">
<li>Data as a random variable with a probability distribution, <span class="math inline">\(O \sim P_0\)</span>.</li>
<li>The statistical model <span class="math inline">\(\mathcal{M}\)</span> such that <span class="math inline">\(P_0 \in \mathcal{M}\)</span>.</li>
<li>The statistical target parameter <span class="math inline">\(\Psi\)</span> and estimand <span class="math inline">\(\Psi(P_0)\)</span>.</li>
<li>The estimator <span class="math inline">\(\hat{\Psi}\)</span> and estimate <span class="math inline">\(\hat{\Psi}(P_n)\)</span>.</li>
<li>A measure of uncertainty for the estimate <span class="math inline">\(\hat{\Psi}(P_n)\)</span>.</li>
</ol>
<div id="data-a-random-variable-with-a-probability-distribution-o-sim-p_0" class="section level3 unnumbered">
<h3>(1) Data: A random variable with a probability distribution, <span class="math inline">\(O \sim P_0\)</span><a class="anchor" aria-label="anchor" href="#data-a-random-variable-with-a-probability-distribution-o-sim-p_0"><i class="fas fa-link"></i></a>
</h3>
<p>The data set we’re confronted with is the result of an experiment and we can
view the data as a random variable, <span class="math inline">\(O\)</span>, because if we repeat the experiment
we would have a different realization of this experiment. In particular, if we
repeat the experiment many times we could learn the probability distribution,
<span class="math inline">\(P_0\)</span>, of our data. So, the observed data <span class="math inline">\(O\)</span> with probability distribution
<span class="math inline">\(P_0\)</span> are <span class="math inline">\(n\)</span> independent identically distributed (i.i.d.) observations of the
random variable <span class="math inline">\(O; O_1, \ldots, O_n\)</span>. Note that while not all data are i.i.d.,
there are ways to handle non-i.i.d. data, such as establishing conditional
independence, stratifying data to create sets of identically distributed data,
etc. It is crucial that researchers be absolutely clear about what they actually
know about the data-generating distribution for a given problem of interest.
Unfortunately, communication between statisticians and researchers is often
fraught with misinterpretation. The roadmap provides a mechanism by which to
ensure clear communication between research and statistician – it truly helps
with this communication!</p>
<div id="the-empirical-probability-measure-p_n" class="section level4 unnumbered">
<h4>The empirical probability measure, <span class="math inline">\(P_n\)</span><a class="anchor" aria-label="anchor" href="#the-empirical-probability-measure-p_n"><i class="fas fa-link"></i></a>
</h4>
<p>Once we have <span class="math inline">\(n\)</span> of such i.i.d. observations we have an empirical probability
measure, <span class="math inline">\(P_n\)</span>. The empirical probability measure is an approximation of the
true probability measure <span class="math inline">\(P_0\)</span>, allowing us to learn from our data. For
example, we can define the empirical probability measure of a set, <span class="math inline">\(A\)</span>, to be
the proportion of observations which end up in <span class="math inline">\(A\)</span>. That is,
<span class="math display">\[\begin{equation*}
  P_n(A) = \frac{1}{n}\sum_{i=1}^{n} \mathbb{I}(O_i \in A)
\end{equation*}\]</span></p>
<p>In order to start learning something, we need to ask <em>“What do we know about the
probability distribution of the data?”</em> This brings us to Step 2.</p>
</div>
</div>
<div id="the-statistical-model-mathcalm-such-that-p_0-in-mathcalm" class="section level3 unnumbered">
<h3>(2) The statistical model <span class="math inline">\(\mathcal{M}\)</span> such that <span class="math inline">\(P_0 \in \mathcal{M}\)</span><a class="anchor" aria-label="anchor" href="#the-statistical-model-mathcalm-such-that-p_0-in-mathcalm"><i class="fas fa-link"></i></a>
</h3>
<p>The statistical model <span class="math inline">\(\mathcal{M}\)</span> is defined by the question we asked at the
end of Step 1. It is defined as the set of possible probability
distributions for our observed data. Often <span class="math inline">\(\mathcal{M}\)</span> is very large (possibly
infinite-dimensional), to reflect the fact that statistical knowledge is
limited. In the case that <span class="math inline">\(\mathcal{M}\)</span> is infinite-dimensional, we deem this a
nonparametric statistical model.</p>
<p>Alternatively, if the probability distribution of the data at hand is described
by a finite number of parameters, then the statistical model is parametric. In
this case, we subscribe to the belief that the random variable <span class="math inline">\(O\)</span> being
observed has, for example, a normal distribution with mean <span class="math inline">\(\mu\)</span> and variance
<span class="math inline">\(\sigma^2\)</span>. Formally, a parametric model may be defined
<span class="math display">\[\begin{equation*}
  \mathcal{M} = \{P_{\theta} : \theta \in \mathcal{R}^d \}
\end{equation*}\]</span></p>
<p>Sadly, the assumption that the data-generating distribution has a specific,
parametric form is all too common, especially since this is a leap of faith or
an assumption made of convenience. This practice of oversimplification in the
current culture of data analysis typically derails any attempt at trying to
answer the scientific question at hand; alas, such statements as the
ever-popular quip of Box that “All models are wrong but some are useful”
encourage the data analyst to make arbitrary choices even when such a practice
often forces starkly different answers to the same estimation problem. The
Targeted Learning paradigm does not suffer from this bias since it defines the
statistical model through a representation of the true data-generating
distribution corresponding to the observed data.</p>
<p>Now, on to Step 3: <em>“What are we trying to learn from the data?”</em></p>
</div>
<div id="the-statistical-target-parameter-psi-and-estimand-psip_0" class="section level3 unnumbered">
<h3>(3) The statistical target parameter <span class="math inline">\(\Psi\)</span> and estimand <span class="math inline">\(\Psi(P_0)\)</span><a class="anchor" aria-label="anchor" href="#the-statistical-target-parameter-psi-and-estimand-psip_0"><i class="fas fa-link"></i></a>
</h3>
<p>The statistical target parameter, <span class="math inline">\(\Psi\)</span>, is defined as a mapping from the
statistical model, <span class="math inline">\(\mathcal{M}\)</span>, to the parameter space (i.e., a real number)
<span class="math inline">\(\mathcal{R}\)</span>. That is, <span class="math inline">\(\Psi: \mathcal{M}\rightarrow\mathbb{R}\)</span>. The estimand
may be seen as a representation of the quantity that we wish to learn from the
data, the answer to a well-specified (often causal) question of interest. In
contrast to purely statistical estimands, causal estimands require
<em>identification from the observed data</em>, based on causal models that include
several untestable assumptions, described in more detail in the section on
<a href="intro.html#causal">causal target parameters</a>.</p>
<p>For a simple example, consider a data set which contains observations of a
survival time on every subject, for which our question of interest is “What’s
the probability that someone lives longer than five years?” We have,
<span class="math display">\[\begin{equation*}
  \Psi(P_0) = \mathbb{P}(O &gt; 5)
\end{equation*}\]</span></p>
<p>This answer to this question is the <strong>estimand, <span class="math inline">\(\Psi(P_0)\)</span></strong>, which is the
quantity we’re trying to learn from the data. Once we have defined <span class="math inline">\(O\)</span>,
<span class="math inline">\(\mathcal{M}\)</span> and <span class="math inline">\(\Psi(P_0)\)</span> we have formally defined the statistical
estimation problem.</p>
</div>
<div id="the-estimator-hatpsi-and-estimate-hatpsip_n" class="section level3 unnumbered">
<h3>(4) The estimator <span class="math inline">\(\hat{\Psi}\)</span> and estimate <span class="math inline">\(\hat{\Psi}(P_n)\)</span><a class="anchor" aria-label="anchor" href="#the-estimator-hatpsi-and-estimate-hatpsip_n"><i class="fas fa-link"></i></a>
</h3>
<p>To obtain a good approximation of the estimand, we need an estimator, an <em>a
priori</em>-specified algorithm defined as a mapping from the set of possible
empirical distributions, <span class="math inline">\(P_n\)</span>, which live in a non-parametric statistical
model, <span class="math inline">\(\mathcal{M}_{NP}\)</span> (<span class="math inline">\(P_n \in \mathcal{M}_{NP}\)</span>), to the parameter space
of the parameter of interest. That is, <span class="math inline">\(\hat{\Psi} : \mathcal{M}_{NP} \rightarrow \mathbb{R}^d\)</span>. The estimator is a function that takes as input
the observed data, a realization of <span class="math inline">\(P_n\)</span>, and gives as output a value in the
parameter space, which is the <strong>estimate, <span class="math inline">\(\hat{\Psi}(P_n)\)</span></strong>.</p>
<p>Where the estimator may be seen as an operator that maps the observed data and
corresponding empirical distribution to a value in the parameter space, the
numerical output that produced such a function is the estimate. Thus, it is an
element of the parameter space based on the empirical probability distribution
of the observed data. If we plug in a realization of <span class="math inline">\(P_n\)</span> (based on a sample
size <span class="math inline">\(n\)</span> of the random variable <span class="math inline">\(O\)</span>), we get back an estimate <span class="math inline">\(\hat{\Psi}(P_n)\)</span>
of the true parameter value <span class="math inline">\(\Psi(P_0)\)</span>.</p>
<p>In order to quantify the uncertainty in our estimate of the target parameter
(i.e., to construct statistical inference), an understanding of the sampling
distribution of our estimator will be necessary. This brings us to Step 5.</p>
</div>
<div id="a-measure-of-uncertainty-for-the-estimate-hatpsip_n" class="section level3 unnumbered">
<h3>(5) A measure of uncertainty for the estimate <span class="math inline">\(\hat{\Psi}(P_n)\)</span><a class="anchor" aria-label="anchor" href="#a-measure-of-uncertainty-for-the-estimate-hatpsip_n"><i class="fas fa-link"></i></a>
</h3>
<p>Since the estimator <span class="math inline">\(\hat{\Psi}\)</span> is a function of the empirical
distribution <span class="math inline">\(P_n\)</span>, the estimator itself is a random variable with a sampling
distribution. So, if we repeat the experiment of drawing <span class="math inline">\(n\)</span> observations we
would every time end up with a different realization of our estimate and our
estimator has a sampling distribution. The sampling distribution of some estimators
can be theoretically validated to be approximately normally distributed by a
Central Limit Theorem (CLT).</p>
<p>A class of <strong>Central Limit Theorems</strong> (CLTs) are statements regarding the
convergence of the <strong>sampling distribution of an estimator</strong> to a normal
distribution. In general, we will construct estimators whose limit sampling
distributions may be shown to be approximately normal distributed as sample size
increases. For large enough <span class="math inline">\(n\)</span> we have,
<span class="math display">\[\begin{equation*}
  \hat{\Psi}(P_n) \sim N \left(\Psi(P_0), \frac{\sigma^2}{n}\right),
\end{equation*}\]</span>
permitting statistical inference. Now, we can proceed to quantify the
uncertainty of our chosen estimator by construction of hypothesis tests and
confidence intervals. For example, we may construct a confidence interval at
level <span class="math inline">\((1 - \alpha)\)</span> for our estimand, <span class="math inline">\(\Psi(P_0)\)</span>:
<span class="math display">\[\begin{equation*}
  \hat{\Psi}(P_n) \pm z_{1 - \frac{\alpha}{2}}
    \left(\frac{\sigma}{\sqrt{n}}\right),
\end{equation*}\]</span>
where <span class="math inline">\(z_{1 - \frac{\alpha}{2}}\)</span> is the <span class="math inline">\((1 - \frac{\alpha}{2})^\text{th}\)</span>
quantile of the standard normal distribution. Often, we will be interested in
constructing 95% confidence intervals, corresponding to mass <span class="math inline">\(\alpha = 0.05\)</span> in
either tail of the limit distribution; thus, we will typically take
<span class="math inline">\(z_{1 - \frac{\alpha}{2}} \approx 1.96\)</span>.</p>
<p><em>Note:</em> we will typically have to estimate the standard error,
<span class="math inline">\(\frac{\sigma}{\sqrt{n}}\)</span>.</p>
<p>A 95% confidence interval means that if we were to take 100 different samples
of size <span class="math inline">\(n\)</span> and compute a 95% confidence interval for each sample, then
approximately 95 of the 100 confidence intervals would contain the estimand,
<span class="math inline">\(\Psi(P_0)\)</span>. More practically, this means that there is a 95% probability
that the confidence interval procedure generates intervals containing the
true estimand value (or 95% confidence of “covering” the true value). That is,
any single estimated confidence interval either will contain the true estimand
or will not (also called “coverage”).</p>
</div>
</div>
<div id="roadmap-summary" class="section level2">
<h2>
<span class="header-section-number">2.2</span> Summary of the Roadmap<a class="anchor" aria-label="anchor" href="#roadmap-summary"><i class="fas fa-link"></i></a>
</h2>
<p>Data, <span class="math inline">\(O\)</span>, is viewed as a random variable that has a probability distribution.
We often have <span class="math inline">\(n\)</span> units of independent identically distributed units with
probability distribution <span class="math inline">\(P_0\)</span>, such that <span class="math inline">\(O_1, \ldots, O_n \sim P_0\)</span>. We have
statistical knowledge about the experiment that generated this data. In other
words, we make a statement that the true data distribution <span class="math inline">\(P_0\)</span> falls in a
certain set called a statistical model, <span class="math inline">\(\mathcal{M}\)</span>. Often these sets are very
large because statistical knowledge is very limited - hence, these statistical
models are often infinite dimensional models. Our statistical query is, “What
are we trying to learn from the data?” denoted by the statistical target
parameter, <span class="math inline">\(\Psi\)</span>, which maps the <span class="math inline">\(P_0\)</span> into the estimand, <span class="math inline">\(\Psi(P_0)\)</span>. At this
point the statistical estimation problem is formally defined and now we will
need statistical theory to guide us in the construction of estimators. There’s a
lot of statistical theory we will review in this course that, in particular,
relies on the Central Limit Theorem, allowing us to come up with estimators that
are approximately normally distributed and also allowing us to come with
statistical inference (i.e., confidence intervals and hypothesis tests).</p>
</div>
<div id="causal" class="section level2">
<h2>
<span class="header-section-number">2.3</span> Causal Target Parameters<a class="anchor" aria-label="anchor" href="#causal"><i class="fas fa-link"></i></a>
</h2>
<p>In many cases, we are interested in problems that ask questions regarding the
effect of an intervention on a future outcome of interest. These questions can
be represented as causal estimands.</p>
<div id="the-causal-model" class="section level3 unnumbered">
<h3>The Causal Model<a class="anchor" aria-label="anchor" href="#the-causal-model"><i class="fas fa-link"></i></a>
</h3>
<p>After formalizing the data and the statistical model, we can define a causal
model to express causal parameters of interest. Directed acyclic graphs (DAGs)
are one useful tool to express what we know about the causal relations among
variables. Ignoring exogenous <span class="math inline">\(U\)</span> terms (explained below), we assume the
following ordering of the variables in the observed data <span class="math inline">\(O\)</span>. We do this below
using <code>DAGitty</code> <span class="citation">(Textor, Hardt, and Knüppel <a href="references.html#ref-textor2011dagitty">2011</a>)</span>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.dagitty.net">dagitty</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/malcolmbarrett/ggdag">ggdag</a></span><span class="op">)</span>

<span class="co"># make DAG by specifying dependence structure</span>
<span class="va">dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/dagitty/man/dagitty.html">dagitty</a></span><span class="op">(</span>
  <span class="st">"dag {
    W -&gt; A
    W -&gt; Y
    A -&gt; Y
    W -&gt; A -&gt; Y
  }"</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/dagitty/man/VariableStatus.html">exposures</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/dagitty/man/VariableStatus.html">outcomes</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span>
<span class="va">tidy_dag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggdag/man/tidy_dagitty.html">tidy_dagitty</a></span><span class="op">(</span><span class="va">dag</span><span class="op">)</span>

<span class="co"># visualize DAG</span>
<span class="fu"><a href="https://rdrr.io/pkg/ggdag/man/ggdag.html">ggdag</a></span><span class="op">(</span><span class="va">tidy_dag</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggdag/man/theme_dag_blank.html">theme_dag</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="02-roadmap_files/figure-html/simple-DAG-1.png" width="80%" style="display: block; margin: auto;"></div>
<p>While directed acyclic graphs (DAGs) like above provide a convenient means by
which to visualize causal relations between variables, the same causal relations
among variables can be represented via a set of structural equations, which
define the non-parametric structural equation model (NPSEM):
<span class="math display">\[\begin{align*}
  W &amp;= f_W(U_W) \\
  A &amp;= f_A(W, U_A) \\
  Y &amp;= f_Y(W, A, U_Y),
\end{align*}\]</span>
where <span class="math inline">\(U_W\)</span>, <span class="math inline">\(U_A\)</span>, and <span class="math inline">\(U_Y\)</span> represent the unmeasured exogenous background
characteristics that influence the value of each variable. In the NPSEM, <span class="math inline">\(f_W\)</span>,
<span class="math inline">\(f_A\)</span> and <span class="math inline">\(f_Y\)</span> denote that each variable (for <span class="math inline">\(W\)</span>, <span class="math inline">\(A\)</span> and <span class="math inline">\(Y\)</span>, respectively)
is a function of its parents and unmeasured background characteristics, but note
that there is no imposition of any particular functional constraints(e.g.,
linear, logit-linear, only one interaction, etc.). For this reason, they are
called non-parametric structural equation models (NPSEMs). The DAG and set of
nonparametric structural equations represent exactly the same information and so
may be used interchangeably.</p>
<p>The first hypothetical experiment we will consider is assigning exposure to the
whole population and observing the outcome, and then assigning no exposure to
the whole population and observing the outcome. On the nonparametric structural
equations, this corresponds to a comparison of the outcome distribution in the
population under two interventions:</p>
<ol style="list-style-type: decimal">
<li>
<span class="math inline">\(A\)</span> is set to <span class="math inline">\(1\)</span> for all individuals, and</li>
<li>
<span class="math inline">\(A\)</span> is set to <span class="math inline">\(0\)</span> for all individuals.</li>
</ol>
<p>These interventions imply two new nonparametric structural equation models. For
the case <span class="math inline">\(A = 1\)</span>, we have
<span class="math display">\[\begin{align*}
  W &amp;= f_W(U_W) \\
  A &amp;= 1 \\
  Y(1) &amp;= f_Y(W, 1, U_Y),
\end{align*}\]</span>
and for the case <span class="math inline">\(A=0\)</span>,
<span class="math display">\[\begin{align*}
  W &amp;= f_W(U_W) \\
  A &amp;= 0 \\
  Y(0) &amp;= f_Y(W, 0, U_Y).
\end{align*}\]</span></p>
<p>In these equations, <span class="math inline">\(A\)</span> is no longer a function of <span class="math inline">\(W\)</span> because we have
intervened on the system, setting <span class="math inline">\(A\)</span> deterministically to either of the values
<span class="math inline">\(1\)</span> or <span class="math inline">\(0\)</span>. The new symbols <span class="math inline">\(Y(1)\)</span> and <span class="math inline">\(Y(0)\)</span> indicate the outcome variable in
our population if it were generated by the respective NPSEMs above; these are
often called <em>counterfactuals</em> (since they run contrary-to-fact). The difference
between the means of the outcome under these two interventions defines a
parameter that is often called the “average treatment effect” (ATE), denoted
<span class="math display">\[\begin{equation}\label{eqn:ate}
  ATE = \mathbb{E}_X(Y(1)-Y(0)),
\end{equation}\]</span>
where <span class="math inline">\(\mathbb{E}_X\)</span> is the mean under the theoretical (unobserved) full data
<span class="math inline">\(X = (W, Y(1), Y(0))\)</span>.</p>
<p>Note, we can define much more complicated interventions on NPSEM’s, such as
interventions based upon rules (themselves based upon covariates), stochastic
rules, etc. and each results in a different targeted parameter and entails
different identifiability assumptions discussed below.</p>
</div>
<div id="identifiability" class="section level3 unnumbered">
<h3>Identifiability<a class="anchor" aria-label="anchor" href="#identifiability"><i class="fas fa-link"></i></a>
</h3>
<p>Because we can never observe both <span class="math inline">\(Y(0)\)</span> (the counterfactual outcome when <span class="math inline">\(A=0\)</span>)
and <span class="math inline">\(Y(1)\)</span> (similarly, the counterfactual outcome when <span class="math inline">\(A=1\)</span>), we cannot
estimate  directly. Instead, we have to make assumptions under
which this quantity may be estimated from the observed data <span class="math inline">\(O \sim P_0\)</span> under
the data-generating distribution <span class="math inline">\(P_0\)</span>. Fortunately, given the causal model
specified in the NPSEM above, we can, with a handful of untestable assumptions,
estimate the ATE, even from observational data. These assumptions may be
summarized as follows.</p>
<ol style="list-style-type: decimal">
<li>The causal graph implies <span class="math inline">\(Y(a) \perp A\)</span> for all <span class="math inline">\(a \in \mathcal{A}\)</span>, which
is the <em>randomization</em> assumption. In the case of observational data, the
analogous assumption is <em>strong ignorability</em> or <em>no unmeasured confounding</em>
<span class="math inline">\(Y(a) \perp A \mid W\)</span> for all <span class="math inline">\(a \in \mathcal{A}\)</span>;</li>
<li>Although not represented in the causal graph, also required is the assumption
of no interference between units, that is, the outcome for unit <span class="math inline">\(i\)</span> <span class="math inline">\(Y_i\)</span> is
not affected by exposure for unit <span class="math inline">\(j\)</span> <span class="math inline">\(A_j\)</span> unless <span class="math inline">\(i=j\)</span>;</li>
<li>
<em>Consistency</em> of the treatment mechanism is also required, i.e., the outcome
for unit <span class="math inline">\(i\)</span> is <span class="math inline">\(Y_i(a)\)</span> whenever <span class="math inline">\(A_i = a\)</span>, an assumption also known as “no
other versions of treatment”;</li>
<li>It is also necessary that all observed units, across strata defined by <span class="math inline">\(W\)</span>,
have a bounded (non-deterministic) probability of receiving treatment –
that is, <span class="math inline">\(0 &lt; \mathbb{P}(A = a \mid W) &lt; 1\)</span> for all <span class="math inline">\(a\)</span> and <span class="math inline">\(W\)</span>). This assumption
is referred to as <em>positivity</em> or <em>overlap</em>.</li>
</ol>
<p><em>Remark</em>: Together, (2) and (3), the assumptions of no interference and
consistency, respectively, are jointly referred to as the <em>stable unit
treatment value assumption</em> (SUTVA).</p>
<p>Given these assumptions, the ATE may be re-written as a function of <span class="math inline">\(P_0\)</span>,
specifically
<span class="math display">\[\begin{equation}\label{eqn:estimand}
  ATE = \mathbb{E}_0(Y(1) - Y(0)) = \mathbb{E}_0
    \left(\mathbb{E}_0[Y \mid A = 1, W] - \mathbb{E}_0[Y \mid A = 0, W]\right).
\end{equation}\]</span>
In words, the ATE is the difference in the predicted outcome values for each subject, under the
contrast of treatment conditions (<span class="math inline">\(A = 0\)</span> vs. <span class="math inline">\(A = 1\)</span>), in the population,
averaged over all observations. Thus, a parameter of a theoretical “full” data
distribution can be represented as an estimand of the observed data
distribution. Significantly, there is nothing about the representation in
 that requires parameteric assumptions; thus, the regressions
on the right hand side may be estimated freely with machine learning. With
different parameters, there will be potentially different identifiability
assumptions and the resulting estimands can be functions of different components
of <span class="math inline">\(P_0\)</span>. We discuss several more complex estimands in later sections of this
handbook.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="robust.html"><span class="header-section-number">1</span> Robust Statistics and Reproducible Science</a></div>
<div class="next"><a href="tlverse.html"><span class="header-section-number">3</span> Welcome to the tlverse</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#intro"><span class="header-section-number">2</span> The Roadmap for Targeted Learning</a></li>
<li><a class="nav-link" href="#learning-objectives">Learning Objectives</a></li>
<li><a class="nav-link" href="#introduction">Introduction</a></li>
<li>
<a class="nav-link" href="#roadmap"><span class="header-section-number">2.1</span> The Roadmap</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-a-random-variable-with-a-probability-distribution-o-sim-p_0">(1) Data: A random variable with a probability distribution, \(O \sim P_0\)</a></li>
<li><a class="nav-link" href="#the-statistical-model-mathcalm-such-that-p_0-in-mathcalm">(2) The statistical model \(\mathcal{M}\) such that \(P_0 \in \mathcal{M}\)</a></li>
<li><a class="nav-link" href="#the-statistical-target-parameter-psi-and-estimand-psip_0">(3) The statistical target parameter \(\Psi\) and estimand \(\Psi(P_0)\)</a></li>
<li><a class="nav-link" href="#the-estimator-hatpsi-and-estimate-hatpsip_n">(4) The estimator \(\hat{\Psi}\) and estimate \(\hat{\Psi}(P_n)\)</a></li>
<li><a class="nav-link" href="#a-measure-of-uncertainty-for-the-estimate-hatpsip_n">(5) A measure of uncertainty for the estimate \(\hat{\Psi}(P_n)\)</a></li>
</ul>
</li>
<li><a class="nav-link" href="#roadmap-summary"><span class="header-section-number">2.2</span> Summary of the Roadmap</a></li>
<li>
<a class="nav-link" href="#causal"><span class="header-section-number">2.3</span> Causal Target Parameters</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#the-causal-model">The Causal Model</a></li>
<li><a class="nav-link" href="#identifiability">Identifiability</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/tlverse/tlverse-handbook/blob/master/02-roadmap.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/tlverse/tlverse-handbook/edit/master/02-roadmap.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Targeted Learning in R</strong>: Causal Data Science with the tlverse Software Ecosystem" was written by Mark van der Laan, Jeremy Coyle, Nima Hejazi, Ivana Malenica, Rachael Phillips, Alan Hubbard. It was last built on March 11, 2021.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
